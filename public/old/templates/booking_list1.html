
<div class="col-lg-12" style="margin-top:16px; min-height:750px;">
    <br/>
	
    <div class="tab-v2" >
        <ul class="nav nav-tabs">
            <li class='active' ng-class="activeClass1"><a href ng-click="setTab(1);activeClass1='active';activeClass2=''">Bookings Current - As Grid</a></li>
            <li ng-class="activeClass2"><a href ng-click="setTab(2);activeClass2='active';activeClass1=''">Bookings Current - As Table</a></li>
        </ul>
        <div class="tab-content">
            <div class="tab-pane fade in active" ng-show="isSet(1)">
                <div class="panel panel-green" style="margin:7px 0;">
                    <div class="panel-heading">
                        <h3 class="panel-title"><i class="fa fa-globe"></i> Jobs Between - {{dt_from | date : 'dd-MM-yyyy'}} & {{dt_to | date : 'dd-MM-yyyy'}}</h3> 
					</div>
					<div class="table-responsive">
                        <table class="table table-bordered table-striped">
                            <thead class="jobs">
                                <tr class="blueLine">
                                    <th><i class="fa fa-arrow-left" ng-click="getGridViewListingPrevNext(dt_from, 'previous')"></i>14 Days<i class="fa fa-arrow-right" ng-click="getGridViewListingPrevNext(dt_to, 'next')"></i></th>
                                    <th ng-repeat="time in time_arr">{{time.start}}</th>
                                </tr>
                            </thead>
                            <tbody ng-hide="tab_res1">
								<tr>
									<td colspan="25"><div ng-show="loading1" style="position: fixed;left: 0px;top: 0px;width: 100%;height: 100%;z-index: 99;background: url(http://www.limokit.com/bms_clients/repo/images/load.gif) center no-repeat;"></div></td>
								</tr>
							</tbody>
							<tbody ng-show="tab_res1">
                                <tr ng-repeat="day in days">
                                    <th>{{day | date : 'dd-MM-yyyy'}}</th>
                                    <td class="selectGreen" ng-repeat="time in time_arr"> <span ng-repeat="grid_data in booking_grid_list_data" ng-if="(day | date : 'MM-dd-yyyy')==(grid_data.jobs.job_date | date : 'MM-dd-yyyy')"><p ng-if="time.start<=grid_data.jobs.pickup_date_time.pickup_time && time.to>grid_data.jobs.pickup_date_time.pickup_time"><a href="#/edit-job/{{grid_data.booking_id}}" tooltips tooltip-side="bottom" tooltip-template="Job ID : {{grid_data.jobs.job_id}}</br>Job Status : {{grid_data.jobs.job_status | uppercase}}</br>PAX : {{grid_data.jobs.pax_title}}&nbsp;{{grid_data.jobs.pax_first_name}}&nbsp;{{grid_data.jobs.pax_last_name}}</br>Driver : {{grid_data.jobs.driver[0].driver_id.title}} {{grid_data.jobs.driver[0].driver_id.first_name}} {{grid_data.jobs.driver[0].driver_id.last_name}}</br>Driver Status : {{grid_data.jobs.driver_status | uppercase}}</br>Pickup : {{grid_data.jobs.from_address.line_1}}&nbsp;{{grid_data.jobs.from_address.line_2}}&nbsp;{{grid_data.jobs.from_address.city}}</br>Destination : {{grid_data.jobs.to_address.line_1}}&nbsp;{{grid_data.jobs.to_address.line_2}}&nbsp;{{grid_data.jobs.to_address.city}}</br>Date : {{grid_data.jobs.pickup_date_time.pickup_date | date : 'dd-MM-yyyy'}}</br>Time : {{grid_data.jobs.pickup_date_time.pickup_time}}</br>Fare : {{grid_data.jobs.fare[0].total_fare}}</br>Payment Status : {{grid_data.jobs.payment_status | uppercase}}">{{grid_data.jobs.pickup_date_time.pickup_time}}</a></p></span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div ng-show="isSet(2)">
                <div class="panel panel-green margin-bottom-10" style="margin:7px 0;">
                    <div class="panel-heading">
                        <h3 class="panel-title"><i class="fa fa-tasks"></i> Booking list - Date : {{display_header_date1 | date : 'dd-MM-yyyy'}}<span ng-if="view_type!='daily'"> & </span>{{display_header_date2 | date : 'dd-MM-yyyy'}}</h3>
					</div>
					<div class="panel-body text-center" ng-init="listDataFilter('daily', '', display_header_date1)">
						<div class="col-sm-1">
							<div id="imaginary_container" class="bms-form noBorder">
								<label class="select">
									<select ng-model="booking_table_list.view_type" ng-change="listDataFilter(booking_table_list.view_type)">
										<option value="daily" ng-selected="true">Daily</option>
										<option value="weekly">Weekly</option>
									</select>
									<i></i>
								</label>
							</div>
						</div>
						<div class="col-sm-1">
							<div id="imaginary_container" ng-show="booking_table_list.view_type=='daily'">
								<i class="fa fa-arrow-left" style="cursor:pointer" ng-click="listDataFilter(booking_table_list.view_type, 'previous', display_header_date1)"></i>
								&nbsp;&nbsp;&nbsp;&nbsp;
								<i class="fa fa-arrow-right" style="cursor:pointer" ng-click="listDataFilter(booking_table_list.view_type, 'next', display_header_date1)"></i>
							</div>
							<div id="imaginary_container" ng-show="booking_table_list.view_type=='weekly'">
								<i class="fa fa-arrow-left" style="cursor:pointer" ng-click="listDataFilter(booking_table_list.view_type, 'previous', display_header_date1)"></i>
								&nbsp;&nbsp;&nbsp;&nbsp;
								<i class="fa fa-arrow-right" style="cursor:pointer" ng-click="listDataFilter(booking_table_list.view_type, 'next', display_header_date2)"></i>
							</div>
						</div>
						<!-- div  for searching-->
						<div class="col-sm-4 col-sm-offset-1">
							<div id="imaginary_container">
								<div class="input-group stylish-input-group">
									<input type="text" class="form-control" ng-model="search" placeholder="Search">
									<span class="input-group-addon">
										<button type="submit"><span class="glyphicon glyphicon-search"></span></button>
									</span> 
								</div>
							</div>
						</div>
						<!-- div  for searching-->
						<div class="col-sm-4 col-sm-offset-1">
							<div id="imaginary_container" class="col-sm-5">
								<date-pick ng-model="list_table.driver_list_table_search_from" placeholder="Select Date" name="driver_list_table_search_from" callback="dateChange()" format="dd-MM-yyyy" autohide="true"></date-pick>
							</div>
							<div id="imaginary_container" class="col-sm-5">
								<date-pick ng-model="list_table.driver_list_table_search_to" placeholder="Select Date" name="driver_list_table_search_to" callback="dateChange()" format="dd-MM-yyyy" autohide="true"></date-pick>
							</div>
							<div id="imaginary_container" class="col-sm-2">
								<button type="button" ng-click="listDataFilter('range', 'default', list_table.driver_list_table_search_from, list_table.driver_list_table_search_to)"><span class="glyphicon glyphicon-search"></span></button>
							</div>
						</div>
					</div><!-- end for searching-->
					<div class="table-responsive">
                        <table class="table table-striped table-bordered table-hover">
                            <thead>
                                <tr>
                                    <th>&nbsp;</th>
                                    <th ng-click="sort_table_by('role')" style="width:3%">Job ID<span class="glyphicon sort-icon" ng-show="sortKey=='role'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span> </th>
                                    <th ng-click="sort_table_by('title')">Bkg Status<span class="glyphicon sort-icon" ng-show="sortKey=='title'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span> </th>
                                    <th ng-click="sort_table_by('title')">Driver Status<span class="glyphicon sort-icon" ng-show="sortKey=='title'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span> </th>
                                    <th ng-click="sort_table_by('status')">Driver<span class="glyphicon sort-icon" ng-show="sortKey=='status'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span> </th>
                                    <th ng-click="sort_table_by('first_name')" style="width:6%">Bkg Date/Time<span class="glyphicon sort-icon" ng-show="sortKey=='first_name'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span> </th>
                                    <th ng-click="sort_table_by('title')">Vehicle<span class="glyphicon sort-icon" ng-show="sortKey=='title'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span> </th>
									<th ng-click="sort_table_by('title')">Pax#<span class="glyphicon sort-icon" ng-show="sortKey=='title'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span> </th>
									<th ng-click="sort_table_by('title')">Lug#<span class="glyphicon sort-icon" ng-show="sortKey=='title'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span> </th>
									<th ng-click="sort_table_by('title')">Extras<span class="glyphicon sort-icon" ng-show="sortKey=='title'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span> </th>
                                    <th ng-click="sort_table_by('title')">Pax name<span class="glyphicon sort-icon" ng-show="sortKey=='title'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span> </th>
                                    <th ng-click="sort_table_by('title')">Flight No.<span class="glyphicon sort-icon" ng-show="sortKey=='title'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span> </th>
                                    <th ng-click="sort_table_by('password')">Pick up<span class="glyphicon sort-icon" ng-show="sortKey=='email'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span> </th>
                                    <th ng-click="sort_table_by('status')">Destination<span class="glyphicon sort-icon" ng-show="sortKey=='status'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span> </th>
                                    <th ng-click="sort_table_by('status')">Ext Notes<span class="glyphicon sort-icon" ng-show="sortKey=='status'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span> </th>
                                    <th ng-click="sort_table_by('status')">Int Notes<span class="glyphicon sort-icon" ng-show="sortKey=='status'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span> </th>
                                    <th ng-click="sort_table_by('status')">Bkg By<span class="glyphicon sort-icon" ng-show="sortKey=='status'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span> </th>
                                    <th ng-click="sort_table_by('status')">Acc Name<span class="glyphicon sort-icon" ng-show="sortKey=='status'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span> </th>
                                    <th ng-click="sort_table_by('status')">Fare<span class="glyphicon sort-icon" ng-show="sortKey=='status'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span> </th>
                                </tr>
                            </thead>
                            <tbody ng-hide="tab_res2">
								<tr>
									<td colspan="14"><div ng-show="loading" style="position: fixed;left: 0px;top: 0px;width: 100%;height: 100%;z-index: 99;background: url(http://www.limokit.com/bms_clients/repo/images/load.gif) center no-repeat;"></div></td>
								</tr>
							</tbody>
							<tbody ng-show="tab_res2">
                                <tr dir-paginate="booking_list in booking_list_data|orderBy:sortKey:reverse|filter:search|itemsPerPage:selected_search_type_per_page">
                                    <tr>
                                        <td colspan="14" ng-show="!booking_list_data.length" style="align:center"><b>No Booking Available.</b></td>
                                    </tr>
                                    <tr ng-repeat="booking_list in booking_list_data | orderBy : ['-jobs[0].pickup_date_time.pickup_date','-jobs[0].pickup_date_time.pickup_time'] | filter:search | itemsPerPage:selected_search_type_per_page">
                                        <td></td>
                                        <td><a href="#/edit-job/{{booking_list.booking_id}}">{{booking_list.jobs[0].job_id}}</a></td>
                                        <td><span ng-if="booking_list.booking_status" class="label label-success">{{booking_list.booking_status | uppercase}}</span> <span class="color-red" ng-if="!booking_list.booking_status">N/A</span> </td>
                                        <td><span class="label label-warning" ng-if="booking_list.jobs[0].driver_status && booking_list.jobs[0].driver_status == 'not_allotted'">NOT ALLOTTED</span><span class="label label-warning" ng-if="booking_list.jobs[0].driver_status && booking_list.jobs[0].driver_status == 'allotted'">ALLOTTED</span><span class="label label-warning" ng-if="booking_list.jobs[0].driver_status && booking_list.jobs[0].driver_status == 'offered'">OFFERED</span><span class="label label-warning" ng-if="booking_list.jobs[0].driver_status && booking_list.jobs[0].driver_status == 'allocate'">ALLOCATE</span><span class="label label-warning" ng-if="booking_list.jobs[0].driver_status && booking_list.jobs[0].driver_status == 'cancelled_pay'">CANCELLED PAY</span><span class="label label-warning" ng-if="booking_list.jobs[0].driver_status && booking_list.jobs[0].driver_status == 'cancelled_no_pay'">CANCELLED NO PAY</span><span class="label label-warning" ng-if="booking_list.jobs[0].driver_status && booking_list.jobs[0].driver_status == 'paid'">PAID</span><span class="color-red" ng-if="!booking_list.jobs[0].driver_status">N/A</span></td>
                                        <td>{{booking_list.jobs[0].driver[0].driver_id.title}} {{booking_list.jobs[0].driver[0].driver_id.first_name}} {{booking_list.jobs[0].driver[0].driver_id.last_name}}</td>
                                        <td>
											<b>{{booking_list.jobs[0].pickup_date_time.pickup_time}}</b>
                                            <br>{{booking_list.jobs[0].pickup_date_time.pickup_date | date : 'dd-MM-yyyy'}}
										</td>
                                        <td>{{booking_list.jobs[0].car_type_id.car_class}}</td>
										<td>{{booking_list.jobs[0].pax_nos}}</td>
										<td>{{booking_list.jobs[0].luggage_large_nos}}</td>
										<td>{{booking_list.jobs[0].car_type_id.car_class}}</td>
                                        <td>{{booking_list.jobs[0].pax_title}}&nbsp;{{booking_list.jobs[0].pax_first_name}}&nbsp;{{booking_list.jobs[0].pax_last_name}}</br>{{booking_list.jobs[0].pax_phone}}</td>
                                        <td>{{booking_list.jobs[0].flight_number}}</td>
                                        <td>{{booking_list.jobs[0].from_address.line_1}}&nbsp;{{booking_list.jobs[0].from_address.line_2}}&nbsp;{{booking_list.jobs[0].from_address.suburb_district}}&nbsp;{{booking_list.jobs[0].from_address.city}}</td>
                                        <td>{{booking_list.jobs[0].to_address.line_1}}&nbsp;{{booking_list.jobs[0].to_address.line_2}}&nbsp;{{booking_list.jobs[0].to_address.suburb_district}}&nbsp;{{booking_list.jobs[0].to_address.city}}</td>
                                        <td>{{booking_list.jobs[0].external_notes}}</td>
                                        <td>{{booking_list.jobs[0].internal_notes}}</td>
                                        <td>{{booking_list.customer_id.contacts[0].name.title}}&nbsp;{{booking_list.customer_id.contacts[0].name.first_name}}&nbsp;{{booking_list.customer_id.contacts[0].name.last_name}}</td>
                                        <td>{{booking_list.jobs[0].customer_id.name}}</td>
                                        <td style="text-align:right;">
											<span ng-if="booking_list.jobs[0].fare[0].total_fare && booking_list.jobs[0].fare[0].total_fare !=''">${{booking_list.jobs[0].fare[0].total_fare | number : 2}}</span>
										</td>
                                    </tr>
                                </tr>
                            </tbody>
                        </table>
                        <!-- end of main table-->
                    </div>
                    <!-- end of main table div> -->
                </div>
                <!-- end of main panel-->
                <div class="pull-left">
                    <div class="dataTables_length" id="dataTables-example_length">
						<div class="bms-form noBorder">
							<label>Show</label>
							<label class="select">
								<select ng-model="selected_search_type_per_page" ng-options="search.value as search.name for search in page_per_pagination" ng-init="selected_search_type_per_page=selected_page_pagination">
									<option value="">Select no of rows</option>
								</select>
								<i></i>
							</label>
						</div>
                    </div>
                </div>
                <ul class="pagination pull-right">
                    <dir-pagination-controls max-size="5" direction-links="true" boundary-links="true"> </dir-pagination-controls>
                </ul>
            </div>
            <div class="clearfix"></div>
        </div>
    </div>
</div>
