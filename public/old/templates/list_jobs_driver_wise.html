<div ng-controller="allDriverAccountController" ng-cloak>
	<div class="panel panel-green margin-bottom-10" style="margin:7px 0;">
		<div class="panel-heading">
			<h3 class="panel-title"><i class="fa fa-tasks"></i> Driver Account list - Date : {{display_header_date1 | date : 'dd-MM-yyyy'}}<span ng-if="view_type!='daily'"> & </span>{{display_header_date2 | date : 'dd-MM-yyyy'}}
			<!--<button class="btn btn-sm btn-info pull-right" ng-click="allotSelectedJobs(job_for_allot)">Allot</button>-->
			</h3>
		</div>
		<div class="panel-body text-center" ng-init="listDataFilter('daily', '', display_header_date1)">
			<div class="row">
				<div class="col-lg-4 col-md-4 col-sm-4 col-xs-12">
					<div class="col-md-8" style="padding:0;">
						<div id="imaginary_container" class="bms-form noBorder">
							<label class="select">
								<select ng-model="booking_table_list.view_type" ng-change="listDataFilter(booking_table_list.view_type)">
									<option value="daily" ng-selected="true">Daily</option>
									<option value="weekly">Weekly</option>
								</select>
								<i></i>
							</label>
						</div>
					</div>
					<div class="clearfix"></div>
					<div class="col-md-4 text-left" style="padding:0;">
						<span id="imaginary_container" ng-show="booking_table_list.view_type=='daily'">
							<i class="fa fa-arrow-left" style="cursor:pointer" ng-click="listDataFilter(booking_table_list.view_type, 'previous', display_header_date1)"></i>
							&nbsp;&nbsp;&nbsp;&nbsp;
							<i class="fa fa-arrow-right" style="cursor:pointer" ng-click="listDataFilter(booking_table_list.view_type, 'next', display_header_date1)"></i>
						</span>
						<span id="imaginary_container" ng-show="booking_table_list.view_type=='weekly'">
							<i class="fa fa-arrow-left" style="cursor:pointer" ng-click="listDataFilter(booking_table_list.view_type, 'previous', display_header_date1)"></i>
							&nbsp;&nbsp;&nbsp;&nbsp;
							<i class="fa fa-arrow-right" style="cursor:pointer" ng-click="listDataFilter(booking_table_list.view_type, 'next', display_header_date2)"></i>
						</span>
					</div>
				</div>
				<!-- div  for searching-->
				<div class="col-lg-4 col-md-4 col-sm-4 col-xs-12" style="margin-bottom:10px;">
					<div id="imaginary_container">
						<div class="input-group stylish-input-group">
							<input type="text" class="form-control" ng-model="search" placeholder="Search">
							<span class="input-group-addon">
								<button type="submit"><i class="glyphicon glyphicon-search"></i></button>
							</span> 
						</div>
					</div>
				</div>
				<!-- div  for searching-->
				<div class="col-lg-4 col-md-4 col-sm-4 col-xs-12">
					<div class="row">
						<div id="imaginary_container" class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
							<date-pick ng-model="list_table.driver_list_table_search_from" placeholder="Select Date" name="driver_list_table_search_from" callback="dateChange()" format="dd-MM-yyyy" autohide="true"></date-pick>
						</div>
						<div id="imaginary_container" class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
							<date-pick ng-model="list_table.driver_list_table_search_to" placeholder="Select Date" name="driver_list_table_search_to" callback="dateChange()" format="dd-MM-yyyy" autohide="true"></date-pick>
						</div>
						<div id="imaginary_container" class="col-lg-12 text-right">
							<button style="height:26px; line-height:14px;" class="btn btn-success btn-sm" type="button" ng-click="listDataFilter('range', 'default', list_table.driver_list_table_search_from, list_table.driver_list_table_search_to)">Search <i class="glyphicon glyphicon-search"></i></button>
						</div>
					</div>
				</div>
			</div>
		</div><!-- end for searching-->
		<div class="table-responsive">
			<table class="table table-striped table-bordered table-hover">
				<thead>
					<tr>
						<!--<th><input type="checkbox" ng-click="checkAll = !checkAll"></input></th>-->
						<th ng-click="sortJobListTableBy('job_id')" style="width:3%">Job ID&nbsp;<span class="glyphicon sort-icon" ng-show="sortKey=='job_id'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span><span class="glyphicon sort-icon" ng-hide="sortKey=='job_id'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span></th>
						<th ng-click="sortJobListTableBy('pickup_date_time.pickup_time')">Job Time&nbsp;<span class="glyphicon sort-icon" ng-show="sortKey=='pickup_date_time.pickup_time'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span><span class="glyphicon sort-icon" ng-hide="sortKey=='pickup_date_time.pickup_time'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span></th>
						<th>Pick up&nbsp;</th>
						<th>Destination&nbsp;</th>
						<th ng-click="sortJobListTableBy(['driver[0].driver_id.first_name','driver[0].driver_id.last_name'])" style="width:6%">Driver&nbsp;<span class="glyphicon sort-icon" ng-show="sortKey==['driver[0].driver_id.first_name','driver[0].driver_id.last_name']" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span><span class="glyphicon sort-icon" ng-hide="sortKey==['driver[0].driver_id.first_name','driver[0].driver_id.last_name']" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span></th>
						<th ng-click="sortJobListTableBy('jobs.car_type_id.car_class')">Account Job&nbsp;<span class="glyphicon sort-icon" ng-show="sortKey=='jobs.car_type_id.car_class'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span><span class="glyphicon sort-icon" ng-hide="sortKey=='jobs.car_type_id.car_class'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span></th>
						<th ng-click="sortJobListTableBy('jobs.pax_first_name')">Collect Job&nbsp;<span class="glyphicon sort-icon" ng-show="sortKey=='jobs.pax_first_name'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span><span class="glyphicon sort-icon" ng-hide="sortKey=='jobs.pax_first_name'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span></th>
						<th ng-click="sortJobListTableBy('jobs.pickup_flight_number')">Commission&nbsp;<span class="glyphicon sort-icon" ng-show="sortKey=='jobs.pickup_flight_number'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span><span class="glyphicon sort-icon" ng-hide="sortKey=='jobs.pickup_flight_number'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span></th>
					</tr>
				</thead>
				<tbody ng-hide="tab_res2">
					<tr>
						<td colspan="8"><div ng-show="loading" style="position: fixed;left: 0px;top: 0px;width: 100%;height: 100%;z-index: 99;background: url(http://www.limokit.com/bms_clients/repo/images/load.gif) center no-repeat;"></div></td>
					</tr>
				</tbody>
				<tbody ng-show="all_driver_account_list_data.length<=0">
					<tr><td colspan="8" style="align:center"><b>No Data Available.</b></td></tr>
				</tbody>
				<tbody ng-show="tab_res2" ng-repeat="driver_account_list_data in all_driver_account_list_data|orderBy:sort_table:reverse|filter:search|itemsPerPage:selected_search_type_per_page">
					<tr ng-show="all_driver_account_list_data.length" dir-paginate="driver_account_list in driver_account_list_data.jobs|orderBy:'driver[0].driver_id.first_name'|filter:search|itemsPerPage:selected_search_type_per_page">
						<tr ng-repeat="driver_account_list in driver_account_list_data.jobs|orderBy:'driver[0].driver_id.first_name'">
							<td>{{driver_account_list.job_id}}</td>
							<td><b>{{driver_account_list.pickup_date_time.pickup_time}}</b>
								<br>{{driver_account_list.job_date_for_display}}
							</td>
							<td>
								<b>{{driver_account_list.from_address.label}}</b></br>{{driver_account_list.from_address.line_1}}&nbsp;{{booking_list.jobs.from_address.line_2}}&nbsp;{{booking_list.from_address.suburb_district}}&nbsp;{{booking_list.jobs.from_address.city}}&nbsp;{{booking_list.from_address.state}}</b>
							</td>
							<td>{{driver_account_list.to_address.label}}</b></br>{{driver_account_list.to_address.line_1}}&nbsp;{{booking_list.to_address.line_2}}&nbsp;{{booking_list.to_address.suburb_district}}&nbsp;{{booking_list.to_address.city}}&nbsp;{{booking_list.to_address.state}}</td>
							<td>{{driver_account_list.driver[0].driver_id.title}} {{driver_account_list.driver[0].driver_id.first_name}} {{driver_account_list.driver[0].driver_id.last_name}}</br><span ng-show="booking_list.jobs.pax_phone">{{driver_account_list.pax_phone}}</span></td>
							<td><span ng-if="driver_account_list.driver[0].driver_payment_option=='account'">{{currency_symbol}}{{driver_account_list.driver[0].driver_price}}</span></td>
							<td>
								<span ng-if="driver_account_list.driver[0].driver_payment_option=='collect'">{{currency_symbol}}{{driver_account_list.driver[0].driver_price}}</span>
							</td>
							<td> <span ng-if="driver_account_list.driver[0].percentage_commission">{{((((driver_account_list.driver[0].percentage_commission).split(".")[0])*(driver_account_list.driver[0].driver_price))/100)|currency:''}}</span>
								<span ng-if="driver_account_list.driver[0].fixed_commission">{{((driver_account_list.driver[0].driver_price)-(driver_account_list.driver[0].fixed_commission))|currency:''}}</span>
							</td>
						</tr>
					</tr>
				</tbody>
			</table>
			<!-- end of main table-->
		</div>
		<!-- end of main table div> -->
	</div>
	<!-- end of main panel-->
	<div class="pull-left">
		<div class="dataTables_length" id="dataTables-example_length">
			<div class="bms-form noBorder">
				<label>Show</label>
				<label class="select">
					<select ng-model="selected_search_type_per_page" ng-options="search.value as search.name for search in page_per_pagination" ng-init="selected_search_type_per_page=selected_page_pagination">
						<option value="">Select no of rows</option>
					</select>
					<i></i>
				</label>
			</div>
		</div>
	</div>
	<ul class="pagination pull-right">
		<dir-pagination-controls max-size="5" direction-links="true" boundary-links="true"> </dir-pagination-controls>
	</ul>
</div>