
<div  ng-controller="bookingListController" ng-cloak>
	<div class="panel panel-green margin-bottom-10" style="margin:7px 0;">
		<div class="panel-heading">
			<h3 class="panel-title"><i class="fa fa-tasks"></i> Booking list - Date : {{display_header_date1 | date : 'dd-MM-yyyy'}}<span ng-if="view_type!='daily'"> & </span>{{display_header_date2 | date : 'dd-MM-yyyy'}}
			<i class="fa fa-file-pdf-o fa-2x pull-right" style="cursor: pointer; font-size: 26px; line-height: 11px;" ng-click="openGenerateBookingPDFData()" style="cursor:pointer;" tooltips tooltip-side="right" tooltip-template="Export booking data to PDF format."></i>&nbsp;&nbsp;
			<i class="fa fa-file-excel-o fa-2x pull-right" style="cursor: pointer; font-size: 26px; line-height: 11px;" ng-click="generateBookingCSVData()" style="cursor:pointer;" tooltips tooltip-side="right" tooltip-template="Export booking data to CSV format."></i>&nbsp;&nbsp;
			<!--<button class="btn btn-sm btn-info pull-right" ng-click="allotSelectedJobs(job_for_allot)">Allot</button>-->
			</h3>
		</div>
		<div class="panel-body text-center" ng-init="listDataFilter('daily', '', display_header_date1)">
			<div class="row">
				<div class="col-lg-4 col-md-4 col-sm-4 col-xs-12">
					<div class="col-md-8" style="padding:0;">
						<div id="imaginary_container" class="bms-form noBorder">
							<label class="select">
								<select ng-model="booking_table_list.view_type" ng-change="listDataFilter(booking_table_list.view_type)">
									<option value="daily" ng-selected="true">Daily</option>
									<option value="weekly">Weekly</option>
								</select>
								<i></i>
							</label>
						</div>
					</div>
					<div class="clearfix"></div>
					<div class="col-md-4 text-left" style="padding:0;">
						<span id="imaginary_container" ng-show="booking_table_list.view_type=='daily'">
							<i class="fa fa-arrow-left" style="cursor:pointer" ng-click="listDataFilter(booking_table_list.view_type, 'previous', display_header_date1)"></i>
							&nbsp;&nbsp;&nbsp;&nbsp;
							<i class="fa fa-arrow-right" style="cursor:pointer" ng-click="listDataFilter(booking_table_list.view_type, 'next', display_header_date1)"></i>
						</span>
						<span id="imaginary_container" ng-show="booking_table_list.view_type=='weekly'">
							<i class="fa fa-arrow-left" style="cursor:pointer" ng-click="listDataFilter(booking_table_list.view_type, 'previous', display_header_date1)"></i>
							&nbsp;&nbsp;&nbsp;&nbsp;
							<i class="fa fa-arrow-right" style="cursor:pointer" ng-click="listDataFilter(booking_table_list.view_type, 'next', display_header_date2)"></i>
						</span>
					</div>
					<div class="clearfix"></div>
					<span ng-if="admin_type_session_value=='Admin'">
						<div class="bulkAllot pull-left">
							<button type="button" class="btn btn-warning btn-md" ng-click="bulkAllotToDriver()">Bulk Allot</button>
						</div>
					</span>
				</div>
				<!-- div  for searching-->
				<div class="col-lg-4 col-md-4 col-sm-4 col-xs-12" style="margin-bottom:10px;">
					<div id="imaginary_container">
						<div class="input-group stylish-input-group">
							<input type="text" class="form-control" ng-model="search" placeholder="Search">
							<span class="input-group-addon">
								<button type="submit"><i class="glyphicon glyphicon-search"></i></button>
							</span> 
						</div>
					</div>
				</div>
				<!-- div  for searching-->
				<div class="col-lg-4 col-md-4 col-sm-4 col-xs-12">
					<div class="row">
						<div id="imaginary_container" class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
							<date-pick ng-model="list_table.driver_list_table_search_from" placeholder="Select Date" name="driver_list_table_search_from" callback="dateChange()" format="dd-MM-yyyy" autohide="true"></date-pick>
						</div>
						<div id="imaginary_container" class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
							<date-pick ng-model="list_table.driver_list_table_search_to" placeholder="Select Date" name="driver_list_table_search_to" callback="dateChange()" format="dd-MM-yyyy" autohide="true"></date-pick>
						</div>
						<div id="imaginary_container" class="col-lg-12 text-right">
							<button style="height:26px; line-height:14px;" class="btn btn-success btn-sm" type="button" ng-click="listDataFilter('range', 'default', list_table.driver_list_table_search_from, list_table.driver_list_table_search_to)">Search <i class="glyphicon glyphicon-search"></i></button>
						</div>
					</div>
				</div>
			</div>
		</div><!-- end for searching-->
		<form id="booking_form" name="booking_table_view" novalidate>
		<div class="table-responsive">
			<table class="table table-striped table-bordered table-hover">
				<thead>
					<tr>
						<th><div ng-hide="check_all_checkbox_for_bulk_job"><input type="checkbox" ng-model="selectAll">Check All</div></th>
						<th ng-click="sortBookingListTableBy('jobs.job_id')" style="width:3%">Job ID&nbsp;<span class="glyphicon sort-icon" ng-show="sortKey=='jobs.job_id'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span><span class="glyphicon sort-icon" ng-hide="sortKey=='jobs.job_id'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span></th>
						<th ng-click="sortBookingListTableBy('jobs.job_status')">Job Status&nbsp;<span class="glyphicon sort-icon" ng-show="sortKey=='jobs.job_status'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span><span class="glyphicon sort-icon" ng-hide="sortKey=='jobs.job_status'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span></th>
						<th ng-click="sortBookingListTableBy('jobs.driver_status')">Driver Status&nbsp;<span class="glyphicon sort-icon" ng-show="sortKey=='jobs.driver_status'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span><span class="glyphicon sort-icon" ng-hide="sortKey=='jobs.driver_status'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span></th>
						<th ng-click="sortBookingListTableBy('jobs.driver[0].driver_id.first_name')">Driver&nbsp;<span class="glyphicon sort-icon" ng-show="sortKey=='jobs.driver[0].driver_id.first_name'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span><span class="glyphicon sort-icon" ng-hide="sortKey=='jobs.driver[0].driver_id.first_name'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span></th>
						<th ng-click="sortBookingListTableBy(['jobs.job_date_for_display','jobs.pickup_date_time.pickup_time'])" style="width:6%">Job Time&nbsp;<span class="glyphicon sort-icon" ng-show="sortKey==['jobs.job_date_for_display','jobs.pickup_date_time.pickup_time']" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span><span class="glyphicon sort-icon" ng-hide="sortKey==['jobs.job_date_for_display','jobs.pickup_date_time.pickup_time']" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span></th>
						<th ng-click="sortBookingListTableBy('jobs.car_type_id.car_class')">Vehicle&nbsp;<span class="glyphicon sort-icon" ng-show="sortKey=='jobs.car_type_id.car_class'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span><span class="glyphicon sort-icon" ng-hide="sortKey=='jobs.car_type_id.car_class'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span></th>
						<th ng-click="sortBookingListTableBy('jobs.pax_first_name')">Pax name&nbsp;<span class="glyphicon sort-icon" ng-show="sortKey=='jobs.pax_first_name'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span><span class="glyphicon sort-icon" ng-hide="sortKey=='jobs.pax_first_name'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span></th>
						<th ng-click="sortBookingListTableBy('jobs.pickup_flight_number')">Flight No.&nbsp;<span class="glyphicon sort-icon" ng-show="sortKey=='jobs.pickup_flight_number'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span><span class="glyphicon sort-icon" ng-hide="sortKey=='jobs.pickup_flight_number'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span></th>
						<th ng-click="sortBookingListTableBy('jobs.from_address.label')">Pick up&nbsp;<span class="glyphicon sort-icon" ng-show="sortKey=='jobs.from_address.label'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span><span class="glyphicon sort-icon" ng-hide="sortKey=='jobs.from_address.label'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span></th>
						<th ng-click="sortBookingListTableBy('jobs.to_address.label')">Destination&nbsp;<span class="glyphicon sort-icon" ng-show="sortKey=='jobs.to_address.label'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span><span class="glyphicon sort-icon" ng-hide="sortKey=='jobs.to_address.label'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span></th>
						<th ng-click="sortBookingListTableBy('jobs.pax_nos')">Pax#&nbsp;<span class="glyphicon sort-icon" ng-show="sortKey=='jobs.pax_nos'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span><span class="glyphicon sort-icon" ng-hide="sortKey=='jobs.pax_nos'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span></th>
						<th ng-click="sortBookingListTableBy('jobs.luggage_large_nos')">Lug#&nbsp;<span class="glyphicon sort-icon" ng-show="sortKey=='jobs.luggage_large_nos'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span><span class="glyphicon sort-icon" ng-hide="sortKey=='jobs.luggage_large_nos'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span></th>
						<th width="150" class="width150" ng-click="sortBookingListTableBy('jobs.internal_notes')">Extras&nbsp;<span class="glyphicon sort-icon" ng-show="sortKey=='jobs.internal_notes'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span><span class="glyphicon sort-icon" ng-hide="sortKey=='jobs.internal_notes'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span></th>
						<th>Ext Notes</th>
						<th>Int Notes</th>
						<th ng-click="sortBookingListTableBy('customer_id.contacts[0].name.first_name')">Booking By&nbsp;<span class="glyphicon sort-icon" ng-show="sortKey=='customer_id.contacts[0].name.first_name'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span><span class="glyphicon sort-icon" ng-hide="sortKey=='customer_id.contacts[0].name.first_name'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span></th>
						<th ng-click="sortBookingListTableBy('booking_source')">Bkg Method&nbsp;<span class="glyphicon sort-icon" ng-show="sortKey=='booking_source'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span><span class="glyphicon sort-icon" ng-hide="sortKey=='booking_source'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span></th>
						<th ng-click="sortBookingListTableBy('customer_id.name')">Acc Name&nbsp;<span class="glyphicon sort-icon" ng-show="sortKey=='customer_id.name'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span><span class="glyphicon sort-icon" ng-hide="sortKey=='customer_id.name'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span></th>
						<th ng-click="sortBookingListTableBy('jobs.fare[0].total_fare')">Fare&nbsp;<span class="glyphicon sort-icon" ng-show="sortKey=='jobs.fare[0].total_fare'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span><span class="glyphicon sort-icon" ng-hide="sortKey=='jobs.fare[0].total_fare'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span></th>
					</tr>
				</thead>
				<tbody ng-hide="tab_res2">
					<tr>
						<td colspan="14"><div ng-show="loading" style="position: fixed;left: 0px;top: 0px;width: 100%;height: 100%;z-index: 99;background: url(http://www.limokit.com/bms_clients/repo/images/load.gif) center no-repeat;"></div></td>
					</tr>
				</tbody>
				<tbody ng-show="tab_res2">
					<tr><td colspan="14" ng-show="!booking_list_data.length" style="align:center"><b>No Booking Available.</b></td></tr>
					<tr ng-show="booking_list_data.length" dir-paginate="booking_list in booking_list_data|orderBy:sortKey:reverse|filter:search|itemsPerPage:selected_search_type_per_page">
						<tr ng-repeat="booking_list in booking_list_data|orderBy:sort_table:reverse|filter:search|itemsPerPage:selected_search_type_per_page">
							<td style='width:2%'>
								<span ng-if="booking_list.jobs.driver_status =='not_actioned' && booking_list.jobs.fare[0].total_fare && admin_type_session_value=='Admin' && booking_list.jobs.job_status != 'cancelled'">
									<input type="checkbox" ng-checked="selectAll" name="jobs_details" value="{{booking_list.jobs.job_id}}">
								</span>
							</td>
							<td><a ng-click="user_type == 'Admin' || contact_type == 'booking' || contact_type == 'all'? addTab('Job ID - '+booking_list.jobs.job_id,'../repo/templates/edit_job.html',booking_list.booking_id) : ''">{{booking_list.jobs.job_id}}</a></td>
							<td>
								<span ng-if="!booking_list.jobs.job_status || booking_list.jobs.job_status == ''" class="label label-danger">N/A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> 
								<span ng-if="booking_list.jobs.job_status == 'confirmed'" class="label label-info">{{booking_list.jobs.job_status | uppercase}}</span> 
								<span ng-if="booking_list.jobs.job_status == 'received'" class="label label-success">{{booking_list.jobs.job_status | uppercase}}&nbsp;&nbsp;&nbsp;&nbsp;</span> 
								<span ng-if="booking_list.jobs.job_status == 'requested'" class="label label-success">{{booking_list.jobs.job_status | uppercase}}</span>
								<span ng-if="booking_list.jobs.job_status == 'ended'" class="label label-primary">{{booking_list.jobs.job_status | uppercase}}&nbsp;&nbsp;&nbsp;&nbsp;</span> 
								<span ng-if="booking_list.jobs.job_status == 'cancelled'" class="label label-default"><s>{{booking_list.jobs.job_status | uppercase}}</s></span>
								<span ng-if="booking_list.jobs.job_status == 'completed'" class="label label-primary">{{booking_list.jobs.job_status | uppercase}}</span>
							</td> 
							<td>
								<span class="label label-danger" ng-if="booking_list.jobs.driver_status && booking_list.jobs.driver_status == 'not_actioned'">NOT ACTIONED&nbsp;&nbsp;&nbsp;&nbsp;</span>
								<span class="label label-danger" ng-if="booking_list.jobs.driver_status && booking_list.jobs.driver_status == 'not_allotted'">NOT ACTIONED&nbsp;&nbsp;&nbsp;&nbsp;</span>
								<span class="label label-warning" ng-if="booking_list.jobs.driver_status && booking_list.jobs.driver_status == 'allocate'">TEMPORARY&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
								<span class="label label-warning" ng-if="booking_list.jobs.driver_status && booking_list.jobs.driver_status == 'arrived'">ARRIVED&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
								<span class="label label-warning" ng-if="booking_list.jobs.driver_status && booking_list.jobs.driver_status == 'offered'">OFFERED&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
								<span class="label label-success" ng-if="booking_list.jobs.driver_status && booking_list.jobs.driver_status == 'allotted'">ALLOTTED&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
								<span class="label label-success" ng-if="booking_list.jobs.driver_status && booking_list.jobs.driver_status == 'accepted'">ACCEPTED&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
								<span class="label label-success" ng-if="booking_list.jobs.driver_status && booking_list.jobs.driver_status == 'paid'">PAID&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
								<span class="label label-success" ng-if="booking_list.jobs.driver_status && booking_list.jobs.driver_status == 'cancelled_pay'"><s>CANCEL PAY&nbsp;&nbsp;&nbsp;&nbsp;</s></span>
								<span class="label label-success" ng-if="booking_list.jobs.driver_status && booking_list.jobs.driver_status == 'cancelled_no_pay'"><s>CANCEL NO PAY</s></span>
								<span class="label label-danger" ng-if="!booking_list.jobs.driver_status || booking_list.jobs.driver_status == ''">NOT ACTIONED&nbsp;&nbsp;&nbsp;&nbsp;</span>
								<span class="label label-primary" ng-if="booking_list.jobs.driver_status && booking_list.jobs.driver_status == 'completed'">COMPLETED&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
							</td>
							<td>{{booking_list.jobs.driver[0].driver_id.title}} {{booking_list.jobs.driver[0].driver_id.first_name}} {{booking_list.jobs.driver[0].driver_id.last_name}}</td>
							<td>
								<b>{{booking_list.jobs.pickup_date_time.pickup_time}}</b>
								<br>{{booking_list.jobs.job_date_for_display}}
							</td>
							<td><span ng-hide="booking_list.jobs.car_type_id.car_class">-</span>{{booking_list.jobs.car_type_id.car_class}}</td>
							<td>{{booking_list.jobs.pax_title}}&nbsp;{{booking_list.jobs.pax_first_name}}&nbsp;{{booking_list.jobs.pax_last_name}}</br><span ng-show="booking_list.jobs.pax_phone">{{booking_list.jobs.pax_phone}}</span></td>
							<td>
								<span ng-hide="booking_list.jobs.pickup_flight_number || booking_list.jobs.dropoff_flight_number">-</span>
								<span ng-if="booking_list.jobs.pickup_flight_number"><strong>{{booking_list.jobs.pickup_flight_number}}</strong></br></span>
								<span ng-if="booking_list.jobs.dropoff_flight_number"><strong>{{booking_list.jobs.dropoff_flight_number}}</strong></span>
							</td>
							<td><b>{{booking_list.jobs.from_address.label}}</b></br>{{booking_list.jobs.from_address.line_1}}&nbsp;{{booking_list.jobs.from_address.line_2}}&nbsp;{{booking_list.jobs.from_address.suburb_district}}&nbsp;{{booking_list.jobs.from_address.city}}&nbsp;{{booking_list.jobs.from_address.state}}</td>
							<td><b>{{booking_list.jobs.to_address.label}}</b></br>{{booking_list.jobs.to_address.line_1}}&nbsp;{{booking_list.jobs.to_address.line_2}}&nbsp;{{booking_list.jobs.to_address.suburb_district}}&nbsp;{{booking_list.jobs.to_address.city}}&nbsp;{{booking_list.jobs.to_address.state}}</td>
							<td>{{booking_list.jobs.pax_nos}}</td>
							<td>{{booking_list.jobs.luggage_large_nos}}</td>
							<td width="150" class="width150">
								<span ng-hide="booking_list.jobs.extras.length">-</span>
								<span ng-repeat="ext in booking_list.jobs.extras">
									<span ng-if="ext.extra_nos && ext.extra_nos!=0">
										<span ng-if="$index==0" style="float:left;">
											<p>
												<img src="http://limokit.com/bms_clients/repo/images/baby_seats/baby_seat_20_20.png" alt="Baby Seat"></img>
												<span class="badge badgeCustom">{{ext.extra_nos}}</span>
											</p>
										</span>
										<span ng-if="$index==1" style="float:left;">
											<p>
												<img src="http://limokit.com/bms_clients/repo/images/baby_capsules/baby_capsule_20_20.png" alt="Baby Capsule"></img>
												<span class="badge badgeCustom">{{ext.extra_nos}}</span>
											</p>
										</span>
										<span ng-if="$index==2" style="float:left;">
											<p>
												<img src="http://limokit.com/bms_clients/repo/images/booster_seats/booster_seat_20_20.png" alt="Booster Seat"></img>
												<span class="badge badgeCustom">{{ext.extra_nos}}</span>
											</p>
										</span>
									</span>
								</span>
							</td>
							<td>
								<span ng-hide="booking_list.jobs.external_notes">-</span>
								<span ng-show="booking_list.jobs.external_notes.length > 15" style="cursor:pointer;" tooltips tooltip-side="left" tooltip-template="{{booking_list.jobs.external_notes}}">{{booking_list.jobs.external_notes | truncate : 15}}</span>
								<span ng-show="booking_list.jobs.external_notes.length <= 15">{{booking_list.jobs.external_notes | truncate : 15}}</span>
							</td>
							<td>
								<span ng-hide="booking_list.jobs.internal_notes">-</span>
								<span ng-show="booking_list.jobs.internal_notes.length > 15" style="cursor:pointer;" tooltips tooltip-side="left" tooltip-template="{{booking_list.jobs.internal_notes}}">{{booking_list.jobs.internal_notes | truncate : 15}}</span>
								<span ng-show="booking_list.jobs.internal_notes.length <= 15">{{booking_list.jobs.internal_notes | truncate : 15}}</span>
							</td>
							<td>{{booking_list.customer_id.contacts[0].name.title}}&nbsp;{{booking_list.customer_id.contacts[0].name.first_name}}&nbsp;{{booking_list.customer_id.contacts[0].name.last_name}}</td>
							<td>{{booking_list.booking_source | uppercase}}</td>
							<td>{{booking_list.customer_id.name}}</td>
							<td style="text-align:right;">
								<span ng-hide="booking_list.jobs.fare[0].total_fare && booking_list.jobs.fare[0].total_fare !=''">-</span><span ng-if="booking_list.jobs.fare[0].total_fare && booking_list.jobs.fare[0].total_fare !=''">{{currency_symbol}}{{booking_list.jobs.fare[0].total_fare | number : 2}}</span>
							</td>
						</tr>
					</tr>
				</tbody>
			</table>
			<!-- end of main table-->
		</div>
		</form>
		<!-- end of main table div> -->
	</div>
	<!-- end of main panel-->
	<div class="pull-left">
		<div class="dataTables_length" id="dataTables-example_length">
			<div class="bms-form noBorder">
				<label>Show</label>
				<label class="select">
					<select ng-model="selected_search_type_per_page" ng-options="search.value as search.name for search in page_per_pagination" ng-init="selected_search_type_per_page=selected_page_pagination">
						<option value="">Select no of rows</option>
					</select>
					<i></i>
				</label>
			</div>
		</div>
	</div>
	<ul class="pagination pull-right">
		<dir-pagination-controls max-size="5" direction-links="true" boundary-links="true"> </dir-pagination-controls>
	</ul>
	 <!-------- Bulk allot jobs modal ------->
	<modal class="customModal" title="Bulk Allotment of jobs" visible="bult_allot_to_driver" class="customModal">
		<h3 style="margin-top:0;">Bulk Allotment of Jobs</h3>
		<div class="panel-body text-center bms-form" style="width=1020px">
			<div class="table-responsive">
				<table class="table table-striped table-bordered table-hover">
					<thead>
						<tr>
							<th class="text-left">Remove</th>
							<th class="text-left">Job Id</th>
							<th class="text-left">Time & Date</th>
							<th class="text-left">Vechile</th>
							<th class="text-left">From</th>
							<th class="text-left">To</th>
							<th class="text-left">Pax</th>
							<th class="text-left">Total Fare</th>
							<th class="text-left">Pay Type</th>
							<th class="text-left">Driver Price</th>
							<th class="text-left">Driver Notes</th>
							<th class="text-left">Share Pax Ph No.</th>
						</tr>
					</thead>
					<tbody>
						<tr ng-repeat="bulk_jobs in selected_bulk_jobs_data | orderBy:'-job_id':false">
							<td class="text-left"><button class="close pull-left" ng-click="removeBulkAllotJobsFromModal($index)" style="color:#000; background-color:rbga(0,0,0);" type="button">×</button></td>
							<td class="text-left">{{bulk_jobs.jobs.job_id}}</td>
							<td class="text-left"><b>{{bulk_jobs.jobs.pickup_date_time.pickup_time}}</b></br>
													{{bulk_jobs.jobs.job_date_for_display}}
							</td>
							<td class="text-left">{{bulk_jobs.jobs.car_type_id.car_class}}</td>
							<td class="text-left"><b>{{bulk_jobs.jobs.from_address.label}}</b></br>{{bulk_jobs.jobs.from_address.line_1}}&nbsp;{{bulk_jobs.jobs.from_address.line_2}}&nbsp;{{bulk_jobs.from_address.jobs.suburb_district}}&nbsp;{{bulk_jobs.jobs.from_address.city}}&nbsp;{{bulk_jobs.jobs.from_address.state}}</td>
							<td class="text-left"><b>{{bulk_jobs.jobs.to_address.label}}</b></br>{{bulk_jobs.jobs.to_address.label}}</b></br>{{bulk_jobs.jobs.to_address.line_1}}&nbsp;{{bulk_jobs.jobs.to_address.line_2}}&nbsp;{{bulk_jobs.jobs.to_address.suburb_district}}&nbsp;{{bulk_jobs.jobs.to_address.city}}&nbsp;{{bulk_jobs.jobs.to_address.state}}</td>
							<td class="text-left">{{bulk_jobs.jobs.pax_first_name}} {{bulk_jobs.jobs.pax_last_name}}<br>
													{{bulk_jobs.jobs.pax_phone}}</br>{{bulk_jobs.jobs.customer_id.name}} -&nbsp;<b>{{bulk_jobs.customer_id.payment_type}}</b>
							</td>
							<td class="text-left">{{currency_symbol}}{{bulk_jobs.jobs.fare[0].total_fare | number : 2}}</td>
							<td  class="text-left">
							<section class="col col-lg-12 col-md-12 col-sm-12 col-xs-12">
								<select name="one_way_patment_type" ng-model="bulk_jobs.driver_payment_option" ng-init="bulk_jobs.driver_payment_option=''" ng-change="getDriverPaymentOptionForBulikAllot(bulk_jobs.driver_payment_option,$index)" required>
									<option value="">Payment Option</option>
									<option value="collect">Collect</option>
									<option value="account">Account</option>
								</select> <i></i> 
							</section>
							</td>
							<td class="text-left" ng-init="bulkJobtoFixedTwo(bulk_jobs.jobs.fare[0].total_fare,$index)"> 
								<input type="text" size=8 name="one_way_driver_price" placeholder="Driver Price" ng-model="bulk_jobs.driver_price" ng-blur="bulkJobtoFixedTwo(bulk_jobs.driver_price,$index)";  ng-readonly="bulk_allot_driver_price_disable[$index]" style="text-align:right;" required> 
							</td>
							<td class="text-left">
								<textarea placeholder="Driver notes" name="comment" rows="4" col="15" ng-model="bulk_jobs.driver_notes"></textarea>
							</td>
							<td class="text-left">
								<input type="checkbox" value="share_no" name="share_driver_pax_number" ng-checked="true">
							</td>
						</tr>
						<tr>
							<td colspan="7" class="text-left">Total</td>
							<td colspan="5" class="text-left"><strong>{{currency_symbol}}{{total_fare_amount_for_selected_jobs| number : 2}}</strong></td>
						</tr>
						<tr>
							<td colspan="8" class="text-left">
								<label class="select">
									<select name="bulk_driver_id" data-placeholder="Select a Driver" chosen  ng-model="bulk_jobs_driver_id" data-ng-options="driver._id as (driver.title+' '+driver.first_name +' '+ driver.last_name) for driver in driver_listing_data" required>
									</select>  
									<i></i> 
								</label>
								<div class="error" ng-show="bulk_driver_id.$dirty && bulk_driver_id.$invalid">
									<p>
										<i class="fa fa-exclamation-triangle"></i> 
										<span>
											&nbsp;&nbsp;Please Select a Driver
										</span>
									</p>
								</div>
							</td>
							<td colspan="4" class="text-left"><button type="button" ng-click="allotPermanentlyToDriver(bulk_jobs_driver_id)" style="margin-top:0;" ng-hide="booking_save" value="Save" class="save">ALLOT PERMANENTLY</button></td>
						</tr>
						<tr>
							<td colspan="12"><strong><br><br><br><br></strong></td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
	</modal>
<!-- Below modal show the data generated for pdf. -->
	<modal title="Booking Data" visible="booking_pdf_data_modal">
		<div class="panel-heading">
			<h3>
				<button type="button" onclick="javascript:generatesPDF()" class="btn btn-default btn-xs pull-right" id="create_pdf"><i class="fa fa-file-pdf-o"></i>Generate PDF</button>
			</h3>
		</div>
		<div class="panel-body text-center">
			<div class="table-responsive">
				<table class="table table-striped table-bordered table-hover" id="bookings1">
					<thead>
						<tr>
							<th>
								Job
							</th>
							<th>
								Driver
							</th>
							<th>
								Pax
							</th>
							<th>
								Pickup/Destination
							</th>
							<th>
								Ext/Int Notes
							</th>
							<th>
								Booking
							</th>
							<th>
								Acc Name
							</th>
						</tr>
					</thead>
					<tbody ng-show="tab_res2">
	<!-- IMPORTANT : Donot indent the following code, indentation will lead to broken sstructure in the PDF generated. -->
						<tr ng-repeat="booking_list in booking_list_data | orderBy:sort_table:reverse | filter:search">
							<td>
	{{booking_list.jobs.job_id}}
	</br>
	<span ng-if="!booking_list.jobs.job_status || booking_list.jobs.job_status == ''">N/A</span>{{booking_list.jobs.job_status | uppercase}}
	</br>
	<b>{{booking_list.jobs.pickup_date_time.pickup_time}}</b>
	</br>
	{{booking_list.jobs.job_date_for_display}}
	</br>
	<span ng-if="booking_list.jobs.fare[0].total_fare && booking_list.jobs.fare[0].total_fare !=''">{{currency_symbol}}{{booking_list.jobs.fare[0].total_fare | number : 2}}</span>
							</td>
							<td>
	{{booking_list.jobs.driver[0].driver_id.title}} {{booking_list.jobs.driver[0].driver_id.first_name}} {{booking_list.jobs.driver[0].driver_id.last_name}}
	</br>
	{{booking_list.jobs.car_type_id.car_class}}
	</br>
	<span ng-if="booking_list.jobs.driver_status && booking_list.jobs.driver_status == 'not_actioned'">NOT ACTIONED</span>
	<span ng-if="booking_list.jobs.driver_status && booking_list.jobs.driver_status == 'not_allotted'">NOT ALLOTTED</span>
	<span ng-if="booking_list.jobs.driver_status && booking_list.jobs.driver_status == 'allocate'">ALLOCATED</span>
	<span ng-if="booking_list.jobs.driver_status && booking_list.jobs.driver_status == 'offered'">OFFERED</span>
	<span ng-if="booking_list.jobs.driver_status && booking_list.jobs.driver_status == 'allotted'">ALLOTTED</span>
	<span ng-if="booking_list.jobs.driver_status && booking_list.jobs.driver_status == 'paid'">PAID</span>
	<span ng-if="booking_list.jobs.driver_status && booking_list.jobs.driver_status == 'cancelled_pay'"><s>CANCEL PAY</s></span>
	<span ng-if="booking_list.jobs.driver_status && booking_list.jobs.driver_status == 'cancelled_no_pay'"><s>CANCEL NO PAY</s></span>
	<span ng-if="!booking_list.jobs.driver_status || booking_list.jobs.driver_status == ''">N/A</span>
							</td>
							<td>
	{{booking_list.jobs.pax_title}}&nbsp;{{booking_list.jobs.pax_first_name}}&nbsp;{{booking_list.jobs.pax_last_name}}
	</br>
	{{booking_list.jobs.pax_phone}}
	</br>
	Pax#:{{booking_list.jobs.pax_nos}}
	</br>
	Lugg#:{{booking_list.jobs.luggage_large_nos}}
	</br>
	<span ng-repeat="ext in booking_list.jobs.extras"><span ng-if="ext.extra_nos && ext.extra_nos!=0">{{ext.extra_type_id.name}} : {{ext.extra_nos}}</span></br></span>
							</td>
							<td>
	<span ng-if="booking_list.jobs.pickup_flight_number"><strong>{{booking_list.jobs.pickup_flight_number}}</strong></span>
	</br>
	<b>{{booking_list.jobs.from_address.label}}</b>
	</br>
	{{booking_list.jobs.from_address.line_1}}&nbsp;{{booking_list.jobs.from_address.line_2}}&nbsp;{{booking_list.jobs.from_address.suburb_district}}&nbsp;{{booking_list.jobs.from_address.city}}&nbsp;{{booking_list.jobs.from_address.state}}
	</br>
	<span ng-if="booking_list.jobs.dropoff_flight_number"><strong>{{booking_list.jobs.dropoff_flight_number}}</strong></span>
	</br>
	<b>{{booking_list.jobs.to_address.label}}</b>
	</br>
	{{booking_list.jobs.to_address.line_1}}&nbsp;{{booking_list.jobs.to_address.line_2}}&nbsp;{{booking_list.jobs.to_address.suburb_district}}&nbsp;{{booking_list.jobs.to_address.city}}&nbsp;{{booking_list.jobs.to_address.state}}
							</td>
							<td>
	{{booking_list.jobs.external_notes}}
	</br>
	{{booking_list.jobs.internal_notes}}
							</td>
							<td>
	{{booking_list.customer_id.contacts[0].name.title}}&nbsp;{{booking_list.customer_id.contacts[0].name.first_name}}&nbsp;{{booking_list.customer_id.contacts[0].name.last_name}}
	</br>
	{{booking_list.booking_source | uppercase}}							
							</td>
							<td>
	{{booking_list.customer_id.name}}
							</td>
						</tr>
	<!-- END PDF. -->
					</tbody>
				</table>
				<!-- end of main table-->
			</div>
		</div>
	</modal>
</div>
<script>
function generatesPDF() 
{
    var doc = new jsPDF('l', 'pt');
    doc.text("Booking List", 10, 50);
	var res = doc.autoTableHtmlToJson(document.getElementById("bookings1"));
	doc.autoTable(res.columns, res.data, {startY: 60,margin: {horizontal: 10},styles: {overflow: 'linebreak'},bodyStyles: {valign: 'top'}});
	doc.save('booking-data.pdf');
}
</script>
<style>
.customModal .modal-dialog {
							width:80%;
							}
</style>